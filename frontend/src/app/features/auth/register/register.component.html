<mat-card class="register-card">
  <mat-card-header>
    <mat-card-title>Create an account</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form
      [formGroup]="registerForm"
      (ngSubmit)="onRegister()"
      class="register-form"
    >
      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <input
          matInput
          type="email"
          formControlName="email"
          placeholder="Enter your email"
        />
        <mat-error
          *ngIf="
            registerForm.get('email')?.invalid &&
            registerForm.get('email')?.touched
          "
        >
          Please enter a valid email.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Password</mat-label>
        <input
          matInput
          type="password"
          formControlName="password"
          placeholder="Enter your password"
        />
        <mat-error
          *ngIf="
            registerForm.get('password')?.invalid &&
            registerForm.get('password')?.touched
          "
        >
          Password must be 12 characters minimum.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Password confirmation</mat-label>
        <input
          matInput
          type="password"
          formControlName="passwordConfirmation"
          placeholder="Repeat your password"
        />
        <mat-error
          *ngIf="
            registerForm.hasError('mismatch') &&
            registerForm.get('passwordConfirmation')?.touched
          "
        >
          Passwords do not match.
        </mat-error>
      </mat-form-field>

      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="
          registerForm.invalid || waitingForResponse || accountCreated
        "
      >
        <span>register<mat-spinner *ngIf="waitingForResponse" /></span>
      </button>
      <a mat-button routerLink="/login">I already have an account, log me in </a>
    </form>
    <p *ngIf="message"><mat-icon *ngIf="accountCreated">done</mat-icon> {{message}}</p>
  </mat-card-content>
</mat-card>
